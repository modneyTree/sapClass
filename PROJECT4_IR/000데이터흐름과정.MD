SAP 시스템에서 **데이터 흐름**을 예시를 통해 설명하겠습니다. 이 흐름은 **송장 처리** 시 **송장 테이블**, **송장 아이템 테이블**, 그리고 **지급 테이블**로 데이터가 어떻게 기록되는지, 그리고 **차대변**이 어떻게 분개되는지를 보여줍니다.

---

## **1. 상황 가정**  
- **구매처 (공급자)**: VENDOR001  
- **구매오더 번호**: 4500001234  
- **회사 코드**: 1000  
- **플랜트**: 1000  
- **공급가액**: 1,000,000 KRW  
- **세액 (VAT 10%)**: 100,000 KRW  
- **총 금액**: 1,100,000 KRW  
- **통화**: KRW  
- **송장 처리일**: 2024-06-01  

---

## **2. 데이터 흐름**

### **1단계: 송장 테이블 (송장 헤더 테이블)**  
송장 전체 요약 정보가 저장됩니다.  

| **필드명**      | **설명**              | **값**           |
|-----------------|-----------------------|------------------|
| **송장번호**     | 송장 문서 고유 번호   | 10000001         |
| **회사 코드**    | 회사 식별 코드        | 1000             |
| **구매오더번호** | 참조된 구매오더 번호  | 4500001234       |
| **송장처리일**   | 송장 입력 일자        | 2024-06-01       |
| **전기일**      | 회계 기록 일자        | 2024-06-01       |
| **회계연도**     | 회계 기준 연도        | 2024             |
| **구매처**      | 공급자 번호           | VENDOR001        |

---

### **2단계: 송장 아이템 테이블**  
송장의 라인별 상세 항목이 기록됩니다.  

| **필드명**      | **설명**                 | **값**           |
|-----------------|--------------------------|------------------|
| **송장번호**     | 헤더와 연결된 송장번호    | 10000001         |
| **회사 코드**    | 회사 식별 코드           | 1000             |
| **구매오더번호** | 참조된 구매오더 번호      | 4500001234       |
| **플랜트**      | 자재가 입고된 공장        | 1000             |
| **공급가액**     | 세금 제외 금액           | 1,000,000        |
| **세액**        | 부가가치세 금액           | 100,000          |
| **금액**        | 공급가액 + 세액           | 1,100,000        |
| **통화**        | 거래 통화 코드            | KRW              |
| **세금 코드**    | 세금 계산 코드           | V1               |
| **전표번호**     | 회계 전표 번호           | 5000000010       |
| **전표유형**     | 문서 유형                | RE (송장유형)    |
| **구매처**      | 공급자 번호              | VENDOR001        |

---

### **3단계: 지급 테이블 (BSIK)**  
송장 처리 후 생성된 **회계 전표**에 따라 지급 정보가 저장됩니다.  

| **필드명**       | **설명**                 | **값**           |
|------------------|--------------------------|------------------|
| **회사 코드**     | 회사 식별 코드           | 1000             |
| **구매처**       | 공급자 번호              | VENDOR001        |
| **회계연도**     | 회계 기준 연도           | 2024             |
| **전표번호**      | 생성된 회계 전표 번호     | 5000000010       |
| **증빙일**       | 송장 처리 일자            | 2024-06-01       |
| **전기일**       | 회계 기록 일자            | 2024-06-01       |
| **통화**         | 거래 통화 코드            | KRW              |
| **전표유형**      | 회계 문서 유형            | RE               |
| **차대변지시자**   | 차변/대변 구분            | H (대변)         |
| **세금 코드**     | 세금 계산 코드           | V1               |
| **공급가액**      | 세금 제외 금액           | 1,000,000        |
| **세액**         | 부가가치세 금액           | 100,000          |
| **텍스트**       | 설명                     | 구매오더 4500001234 |
| **구매오더번호**  | 참조된 구매오더 번호      | 4500001234       |
| **지급기산일**    | 지급 기준 일자            | 2024-06-30       |

---

## **3. 차변과 대변 기록**

**회계 전표 분개**:  
송장 처리 시 **차변**과 **대변**이 다음과 같이 기록됩니다.

| **계정**                | **계정 설명**           | **차/대변 (SHKZG)** | **금액 (DMBTR)** | **비고**               |
|--------------------------|------------------------|--------------------|-----------------|-----------------------|
| **공급자 계정**          | 공급자 미지급금 계정    | 대변 (H)          | 1,100,000       | 공급자에게 지급할 금액   |
| **입고/송장 계정 (GR/IR)**| 자산 계정              | 차변 (S)          | 1,000,000       | 자산 증가 (공급가액)     |
| **부가세 계정**           | 세금 계정              | 차변 (S)          | 100,000         | 세금 증가 (VAT 10%)      |

---

## **4. 데이터 흐름 요약**

1. **송장 입력 시**:  
   - 송장 헤더에 송장의 요약 정보가 입력됩니다.  
   - 송장 아이템에 각 라인의 상세 금액 및 세액 정보가 기록됩니다.  

2. **회계 전표 생성**:  
   - SAP 시스템이 **자동으로 차변/대변**을 분개하여 회계 전표를 생성합니다.  
   - **공급자 계정**은 대변에 기록되고, **입고 계정**과 **부가세 계정**은 차변에 기록됩니다.  

3. **지급 테이블에 기록**:  
   - 회계 전표를 기반으로 지급 테이블(BSIK)에 미지급금 항목이 기록됩니다.  
   - 이 금액은 지급 시 현금 계정(차변)과 공급자 계정(대변)으로 결제됩니다.

---

## **결론**  
- **송장 헤더**: 송장의 상위 요약 정보를 기록합니다.  
- **송장 아이템**: 공급가액, 세액, 총 금액 등 상세 정보를 기록합니다.  
- **지급 테이블**: 생성된 회계 전표를 기반으로 미지급금 및 결제 정보를 기록합니다.  
- **차변**: 입고/송장 계정 및 부가세 계정에 기록됩니다.  
- **대변**: 공급자 미지급금 계정에 기록됩니다.

이 흐름은 **송장 처리 → 회계 전표 생성 → 지급 관리**를 완벽하게 연계하며 SAP 시스템의 핵심적인 데이터 흐름을 보여줍니다. 😊