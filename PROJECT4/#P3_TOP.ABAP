*&---------------------------------------------------------------------*
*&  Include           ZPROJECT20_PO_TOP
*&---------------------------------------------------------------------*
TABLES : ZEDT20_P001.
TABLES : ZEDT20_P002.
TABLES : ZEDT20_P003.
TABLES : ZEDT20_P004.
TABLES : ZEDT20_P005.
TABLES : ZEDT20P_200.

CONSTANTS : C_X TYPE CHAR1 VALUE 'X'.


DATA: GS_PO_HEAD TYPE ZEDT20_P004,       " ZEDT20_P004 테이블과 동일한 구조 사용
      GT_PO_HEAD TYPE TABLE OF ZEDT20_P004. " 내부 테이블 선언


"TABLE ZEDT20_P005
DATA : BEGIN OF GS_PO_ITEM,
  EBELN LIKE ZEDT20_P005-EBELN, "구매오더번호
  EBELP LIKE ZEDT20_P005-EBELP, "품목
  ZMATNR LIKE ZEDT20_P005-ZMATNR, "자재번호
  ZMATNAME LIKE ZEDT20_P005-ZMATNAME, "자재명
  MENGE LIKE ZEDT20_P005-MENGE, "수량
  ZMEINS LIKE ZEDT20_P005-ZMEINS, "단위
  STPRS LIKE ZEDT20_P005-STPRS, "단가
  PRDAT LIKE ZEDT20_P005-PRDAT, "납품일
  ZWERKS LIKE ZEDT20_P005-ZWERKS, "플랜트
  ZLGORT LIKE ZEDT20_P005-ZLGORT, "저장위치
  END OF GS_PO_ITEM.
DATA : GT_PO_ITEM LIKE TABLE OF GS_PO_ITEM.

"TABLE ZEDT20P_200. 자재마스터
DATA : BEGIN OF GS_PO_MASTER,
  ZWERKS LIKE ZEDT20P_200-ZWERKS, "플랜트
  ZLGORT LIKE ZEDT20P_200-ZLGORT, "저장위치
  ZMATNR LIKE ZEDT20P_200-ZMATNR, "제품번호
  ZMATNAME LIKE ZEDT20P_200-ZMATNAME, "제품명
  ZMTART LIKE ZEDT20P_200-ZMTART, "자재유형
  STPRS LIKE ZEDT20P_200-STPRS, "단가
  WAERS LIKE ZEDT20P_200-WAERS, "통화
  MENGE LIKE ZEDT20P_200-MENGE, "수량
  MEINS LIKE ZEDT20P_200-MEINS, "단위
  END OF GS_PO_MASTER.
DATA : GT_PO_MASTER LIKE TABLE OF GS_PO_MASTER.

"ALV입력용 : GS_PO_INPUT
DATA : BEGIN OF GS_PO_INPUT,
  ZCOLOR TYPE C LENGTH 4, "정합성체크
  EBELP LIKE ZEDT20_P005-EBELP, "품목
  ZMATNR LIKE ZEDT20_P005-ZMATNR, "자재번호
  ZMATNAME LIKE ZEDT20_P005-ZMATNAME, "자재명
  MMENGE LIKE ZEDT20_P005-MENGE, "PO수량
  STPRS LIKE ZEDT20_P005-STPRS, "단가
  ZMEINS LIKE ZEDT20_P005-ZMEINS, "단위
  WAERS LIKE ZEDT20P_200-WAERS, "통화
  ZLFM1_MWSKZ LIKE ZEDT20_P003-ZLFM1_MWSKZ,"세금코드
  PRDAT LIKE ZEDT20_P005-PRDAT, "납품일
  ZWERKS LIKE ZEDT20_P005-ZWERKS, "플랜트
  ZLGORT LIKE ZEDT20_P005-ZLGORT, "저장위치
  END OF GS_PO_INPUT.
DATA : GT_PO_INPUT LIKE TABLE OF GS_PO_INPUT.

DATA: GS_PO_INPUT_SAVE TYPE ZEDT20_P005,       " ZEDT20_P004 테이블과 동일한 구조 사용
      GT_PO_INPUT_SAVE TYPE TABLE OF ZEDT20_P005. " 내부 테이블 선언

" 입고 처음 화면
DATA: BEGIN OF GS_PO_OUTPUT_ALV,
    ZCHECKBOX TYPE C LENGTH 1,         " 체크박스
    EBELN     LIKE ZEDT20_P004-EBELN,    " 구매오더번호
    EBELP     LIKE ZEDT20_P005-EBELP,    " 품목번호(PO아이템)
    LIFNR     LIKE ZEDT20_P004-LIFNR,    " 구매처(거래처번호)
    BEDAT     LIKE ZEDT20_P004-BEDAT,    " 증빙일
    WAERS     LIKE ZEDT20_P004-WAERS,    " 통화

    ZMATNR    LIKE ZEDT20_P005-ZMATNR,   " 자재번호
    ZMATNAME  LIKE ZEDT20_P005-ZMATNAME, " 자재명
    MENGE     LIKE ZEDT20_P005-MENGE,    " 수량
    ZMEINS    LIKE ZEDT20_P005-ZMEINS,   " 단위
    STPRS     LIKE ZEDT20_P005-STPRS,    " 단가
    PRDAT     LIKE ZEDT20_P005-PRDAT,    " 납품일
    ZWERKS    LIKE ZEDT20_P005-ZWERKS,   " 플랜트
    ZLGORT    LIKE ZEDT20_P005-ZLGORT,   " 저장위치
    END OF GS_PO_OUTPUT_ALV.
DATA: GT_PO_OUTPUT_ALV LIKE TABLE OF GS_PO_OUTPUT_ALV.

" 입고 헤더
DATA : BEGIN OF GS_GR_HEAD,
    ZCHECKBOX TYPE C LENGTH 1,         " 체크박스
    ZMBLNR  LIKE ZEDT20_P006-ZMBLNR,    " 입고문서번호호
    ZMJAHR  LIKE ZEDT20_P006-ZMJAHR,    " 회계연도
    ZBLART  LIKE ZEDT20_P006-ZBLART,    " 전표유형
    ZBLDAT  LIKE ZEDT20_P006-ZBLDAT,    " 증빙일
    ZBUDAT  LIKE ZEDT20_P006-ZBUDAT,    " 전기일
    END OF GS_GR_HEAD.
DATA : GT_GR_HEAD LIKE TABLE OF GS_GR_HEAD.


" 입고 아이템
DATA: BEGIN OF GS_GR_ITEM,
    ZMBLNR LIKE ZEDT20_P007-ZMBLNR,    " 입고문서번호
    ZMJAHR LIKE ZEDT20_P007-ZMJAHR,    " 회계연도
    EBELP LIKE ZEDT20_P007-EBELP,     " 아이템번호
    ZMATNR  LIKE ZEDT20_P007-ZMATNR,    " 제품번호
    ZWERKS  LIKE ZEDT20_P007-ZWERKS,    " 플랜트
    ZLGORT  LIKE ZEDT20_P007-ZLGORT,    " 저장위치
    ZLIFNR  LIKE ZEDT20_P007-ZLIFNR,    " 구매처번호
    WAERS  LIKE ZEDT20_P007-WAERS,     " 통화
    MENGE LIKE ZEDT20_P007-MENGE,     " 수량
    MEINS LIKE ZEDT20_P007-MEINS,     " 단위
    EBELN LIKE ZEDT20_P007-EBELN,     " 구매오더번호
    ZLFB1_BUKRS LIKE ZEDT20_P007-ZLFB1_BUKRS, " 회사코드
    ZGJAHR  LIKE ZEDT20_P007-ZGJAHR,    " 회계연도
    ZBELNR  LIKE ZEDT20_P007-ZBELNR,    " 전표번호
    SHKZG LIKE ZEDT20_P007-SHKZG,     " 차변대변
    DMBTR LIKE ZEDT20_P007-DMBTR,     " 금액
    END OF GS_GR_ITEM.
DATA : GT_GR_ITEM LIKE TABLE OF GS_GR_ITEM.

"SAVE 용 데이터 선언
DATA : GS_PO_HEAD_SAVE TYPE ZEDT20_P004,       " ZEDT20_P004 테이블과 동일한 구조 사용
      GT_PO_HEAD_SAVE TYPE TABLE OF ZEDT20_P004. " 내부 테이블 선언
DATA : GS_PO_ITEM_SAVE TYPE ZEDT20_P005,       " ZEDT20_P005 테이블과 동일한 구조 사용
      GT_PO_ITEM_SAVE TYPE TABLE OF ZEDT20_P005. " 내부 테이블 선언
DATA: GS_GR_HEAD_SAVE TYPE ZEDT20_P006,       " ZEDT20_P006 테이블과 동일한 구조 사용
      GT_GR_HEAD_SAVE TYPE TABLE OF ZEDT20_P006. " 내부 테이블 선언
DATA: GS_GR_ITEM_SAVE TYPE ZEDT20_P007,       " ZEDT20_P007 테이블과 동일한 구조 사용
      GT_GR_ITEM_SAVE TYPE TABLE OF ZEDT20_P007. " 내부 테이블 선언


DATA : OK_CODE TYPE SY-UCOMM.

DATA : GC_DOCKING TYPE REF TO CL_GUI_DOCKING_CONTAINER.
"그리드생성
DATA : GC_GRID TYPE REF TO CL_GUI_ALV_GRID.

DATA : GS_VARIANT TYPE DISVARIANT.

"필드카탈로그
DATA : GS_FIELDCAT TYPE LVC_S_FCAT.
DATA : GT_FIELDCAT TYPE LVC_T_FCAT.
DATA : GS_FIELDCAT_HEAD TYPE LVC_S_FCAT.
DATA : GT_FIELDCAT_HEAD TYPE LVC_T_FCAT.
DATA : GS_FIELDCAT_ITEM TYPE LVC_S_FCAT.
DATA : GT_FIELDCAT_ITEM TYPE LVC_T_FCAT.
DATA : GS_FIELDCAT_INPUT TYPE LVC_S_FCAT.
DATA : GT_FIELDCAT_INPUT TYPE LVC_T_FCAT.
DATA : GS_FIELDCAT_OUTPUT TYPE LVC_S_FCAT.
DATA : GT_FIELDCAT_OUTPUT TYPE LVC_T_FCAT.
"레이아웃
DATA : GS_LAYOUT TYPE LVC_S_LAYO.
"SORT
DATA : GS_SORT TYPE LVC_S_SORT.
DATA : GT_SORT TYPE LVC_T_SORT.

DATA GO_EVENT TYPE REF TO EVENT.