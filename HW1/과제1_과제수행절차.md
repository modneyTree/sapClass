## 과제 수행 절차 안내

이 과제는 ABAP 프로그래밍을 통해 주문 내역 확인서 프로그램을 작성하는 것입니다. 아래에 과제를 수행하기 위한 단계별 절차를 안내해 드리겠습니다.

---

### **1. 사전 준비**

#### **1.1. 개발 환경 설정**
- **SAP 시스템에 로그인**하여 ABAP 개발 환경을 준비합니다.
- **개발 패키지**를 생성하거나 기존 패키지를 사용하여 작업을 진행합니다.

#### **1.2. 테이블 생성**
- **SE11(Transaction Code)**을 사용하여 **두 개의 테이블(ZEDT00_100, ZEDT00_101)**을 생성합니다.
  - **ZEDT00_100**: 주문관리 테이블
  - **ZEDT00_101**: 배송관리 테이블
- 제공된 **테이블 구조**와 **데이터**를 참고하여 필드와 데이터 요소를 정의합니다.
- 각 필드에 대한 **데이터 타입**과 **길이**를 정확히 설정합니다.
- **코드값 매핑**을 위한 **도메인(Domain)**과 **데이터 요소(Data Element)**를 생성하여 유지합니다.
- 테이블 생성 후 **테스트 데이터**를 입력합니다.
  - **SE16N** 또는 **SM30** 등을 사용하여 제공된 데이터를 입력합니다.

---

### **2. 프로그램 생성 및 구조화**

#### **2.1. 프로그램 생성**
- **SE38(Transaction Code)**을 사용하여 새로운 ABAP 프로그램을 생성합니다.
- 프로그램 이름과 제목을 지정하고, **Type**은 **Executable Program**으로 설정합니다.

#### **2.2. INCLUDE 파일 분리**
- 프로그램을 **모듈화**하기 위해 **INCLUDE 문**을 사용하여 코드를 분리합니다.
  - **TOP Include**: 전역 데이터 선언 및 CONSTANTS 선언
    - `INCLUDE ZYOURPROGRAM_TOP.`
  - **SCREEN Include**: 스크린 관련 선언 및 모듈
    - `INCLUDE ZYOURPROGRAM_SCR.`
  - **F01 Include**: PERFORM 문으로 구성된 서브루틴
    - `INCLUDE ZYOURPROGRAM_F01.`
  - **PBO Include**: PBO 모듈
    - `INCLUDE ZYOURPROGRAM_PBO.`
  - **PAI Include**: PAI 모듈
    - `INCLUDE ZYOURPROGRAM_PAI.`
- 각 INCLUDE 파일을 생성하고 해당 내용에 맞게 코드를 작성합니다.

---

### **3. 화면(Screen) 설계**

#### **3.1. 메인 화면(Screen 0100) 설계**
- **SE51(Transaction Code)**을 사용하여 화면을 생성합니다.
- **라디오 버튼**과 **체크박스**를 배치합니다.
  - **라디오 버튼 그룹**: 주문내역(R1), 배송내역(R2)
  - **체크박스**: 반품내역 포함
- **입력 필드**를 배치합니다.
  - **주문번호**, **회원 ID**, **제품번호**
  - **주문일자** 또는 **배송일자** (라디오 버튼 선택에 따라 동적으로 표시)
- **Push Button**을 배치합니다.
  - **조회 버튼**: 사용자 입력에 따라 레포트를 실행
- 화면 요소들의 속성을 설정하고, 필요한 경우 **OK_CODE**를 설정합니다.

#### **3.2. PBO(Process Before Output) 모듈 작성**
- **PBO 모듈**에서 화면 요소들의 **활성화/비활성화**를 제어합니다.
  - 라디오 버튼 선택에 따라 **주문일자**와 **배송일자** 필드의 표시 여부를 결정합니다.
  - **반품내역 포함** 체크박스의 기본값을 설정합니다.
- **INITIALIZATION 이벤트**에서 날짜 필드의 **기본값**을 설정합니다.
  - **시스템 연도의 01.01**부터 **시스템 월의 마지막 날**까지로 설정
  - **말일 계산 함수**(`F_M_GET_LAST_DAY_OF_MONTH`) 등을 사용하여 말일을 계산합니다.

#### **3.3. PAI(Process After Input) 모듈 작성**
- **사용자 입력 검증**을 수행합니다.
  - **주문번호** 또는 **회원 ID** 중 하나 이상이 입력되었는지 확인합니다.
  - **회원 ID**가 입력된 경우, **주문일자**가 입력되었는지 확인합니다.
  - 입력 조건을 만족하지 않을 경우 **에러 메시지**를 출력하고 레포트 실행을 중단합니다.
- **조회 버튼**이 눌렸을 때 해당하는 화면을 호출합니다.
  - **주문내역**이면 `CALL SCREEN 100`.
  - **배송내역**이면 `CALL SCREEN 200`.

---

### **4. 데이터 조회 및 처리**

#### **4.1. 내부 테이블 및 구조 선언**
- **헤더 라인이 없는 내부 테이블**과 **구조**를 선언합니다.
  - **주문내역**과 **배송내역**에 대한 **ALV 출력용 내부 테이블**을 별도로 선언합니다.
- 각 필드에 대한 **주석**을 달아 가독성을 높입니다.

#### **4.2. 데이터 조회 로직 작성**
- **START-OF-SELECTION** 이벤트에서 데이터 조회를 수행합니다.
- **RANGE 변수**를 사용하여 사용자 입력 조건에 맞는 데이터를 조회합니다.
  - **주문번호**, **회원 ID**, **제품번호**, **주문일자** 또는 **배송일자**에 대한 RANGE 변수 생성
- **SELECT 문**을 사용하여 데이터베이스에서 데이터를 조회합니다.
  - **반품내역 포함 체크박스**의 상태에 따라 **반품 데이터의 포함 여부**를 결정합니다.
  - 필요한 경우 **WHERE 조건**에 **반품 여부**를 추가합니다.
- 조회된 데이터를 **ALV 출력용 내부 테이블**에 담습니다.

#### **4.3. 한글 명칭 변환**
- **PERFORM 문**을 사용하여 코드값을 한글 명칭으로 변환합니다.
  - **제품유형명**, **반품구분명**, **배송지역명** 등을 변환하는 서브루틴 작성
- 변환된 값을 내부 테이블의 해당 필드에 할당합니다.

#### **4.4. 금액 및 합계 계산**
- **회원 ID별 합계**와 **전체 합계**를 계산합니다.
  - 내부 테이블을 **SORT**하고, **AT NEW**, **AT END OF** 등을 사용하여 합계를 구할 수 있습니다.
- 계산된 합계를 내부 테이블에 추가하거나 ALV 기능을 활용하여 표시합니다.

---

### **5. ALV 출력 구현**

#### **5.1. DOCKING CONTAINER 생성**
- **CREATE OBJECT**를 사용하여 DOCKING CONTAINER를 생성하는 **PERFORM 문**을 작성합니다.
- 이 PERFORM 문은 **주문내역**과 **배송내역** 모두에서 재사용할 수 있도록 만듭니다.

#### **5.2. ALV GRID 생성 및 출력**
- **CL_GUI_ALV_GRID**를 사용하여 ALV GRID를 생성합니다.
- **필드 카탈로그**를 작성하여 각 필드의 속성을 설정합니다.
  - **합계(SUM)** 필드를 지정합니다.
  - **신호등 표시**를 위해 **컬러 필드**를 설정합니다.
- **CALL ALV**를 수행하는 **PERFORM 문**을 작성합니다.
  - 이 PERFORM 문 역시 **주문내역**과 **배송내역**에서 재사용할 수 있도록 합니다.

#### **5.3. 신호등 표시 구현**
- 내부 테이블에 **컬러 필드**를 추가하여 신호등 표시를 구현합니다.
  - **주문내역**에서는 **매출구분**에 따라 색상을 지정합니다.
    - 매출일 경우 **그린(녹색)**, 반품일 경우 **레드(빨간색)**
  - **배송내역**에서는 **반품체크(ZFLAG)**에 따라 색상을 지정합니다.
    - 'X'인 경우 **레드(빨간색)**, 그 외 **그린(녹색)**
- **필드 카탈로그**에서 해당 필드에 **컬러 속성**을 설정합니다.

#### **5.4. 반품내역 포함 여부에 따른 필드 표시 제어**
- **반품내역 포함 체크박스**의 상태에 따라 ALV에서 **필드의 표시 여부**를 제어합니다.
  - 체크박스가 체크된 경우:
    - **반품구분(R1)**, **반품일자(R1, R2)**, **반품체크(R2)** 필드를 표시
  - 체크박스가 해제된 경우:
    - 해당 필드를 **필드 카탈로그**에서 제외하여 표시하지 않음

---

### **6. CONSTANTS 및 기타 조건 구현**

#### **6.1. CONSTANTS 사용**
- 프로그램에서 자주 사용되는 값이나 변경되지 않는 값을 **CONSTANTS**로 선언합니다.
  - 예: 매출구분 코드, 색상 코드 등
- **CONSTANTS** 선언은 **TOP Include**에서 수행합니다.

#### **6.2. 기타 요구 사항 구현**
- **PERFORM 문**을 최대한 활용하여 코드를 모듈화하고 재사용성을 높입니다.
- 모든 **내부 테이블**과 **워크 영역**에 **헤더 라인이 없는 타입**을 사용합니다.
- **INITIALIZATION**과 **START-OF-SELECTION** 이벤트를 사용하여 프로그램의 초기 설정과 메인 로직을 구성합니다.

---

### **7. 테스트 및 디버깅**

#### **7.1. 다양한 입력 조건 테스트**
- **주문번호**만 입력하여 조회
- **회원 ID**와 **주문일자**를 함께 입력하여 조회
- **반품내역 포함 체크박스**를 체크하거나 해제하여 조회
- **라디오 버튼**을 변경하여 **주문내역**과 **배송내역**을 각각 조회

#### **7.2. 에러 메시지 검증**
- 필수 입력 조건을 만족하지 않을 때 에러 메시지가 제대로 출력되는지 확인합니다.

#### **7.3. 데이터 정확성 검증**
- 조회된 데이터가 입력한 조건과 일치하는지 확인합니다.
- **합계 금액**과 **회원 ID별 합계**가 정확히 계산되어 표시되는지 확인합니다.

#### **7.4. 화면 및 출력 형식 검증**
- 화면에 표시되는 필드와 ALV 출력이 요구 사항에 맞게 구성되었는지 확인합니다.
- **한글 표기**, **신호등 표시**, **필드 숨김/표시** 등이 제대로 구현되었는지 확인합니다.

---

### **8. 최종 점검 및 제출**

#### **8.1. 프로그램 코드 점검**
- **주석**을 추가하여 코드의 가독성을 높입니다.
- **코딩 컨벤션**을 준수하여 일관성 있는 코드를 유지합니다.

#### **8.2. 제출 요건 확인**
- 과제의 **점수 배분 기준**을 다시 확인하여 모든 요구 사항을 충족했는지 점검합니다.

#### **8.3. 제출**
- 프로그램을 **지정된 방식**으로 제출합니다.
  - 제출 기한을 준수합니다.

---

## **추가 팁**

- **문서화**: 프로그램의 주요 기능과 구현 방식을 문서화하면 가독성과 유지보수에 도움이 됩니다.
- **버전 관리**: 개발 과정에서 주기적으로 코드를 백업하거나 버전 관리를 하면 작업 효율을 높일 수 있습니다.
- **참고 자료 활용**: 필요한 경우 SAP 공식 문서나 온라인 자료를 참고하여 모르는 부분을 해결합니다.

---

이상으로 과제 수행 절차를 안내해 드렸습니다. 각 단계에서 요구 사항을 꼼꼼히 확인하고 구현하면 과제를 성공적으로 완료하실 수 있을 것입니다. 과제 수행 중 궁금한 사항이나 문제가 발생하면 추가로 문의해 주세요.